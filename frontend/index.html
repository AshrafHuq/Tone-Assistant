<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Sentiment and Emotion Rephrase</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Tone Assistant</h1>

        <!-- Email Input Section -->
        <div class="mb-3">
            <label for="emailMessage" class="form-label">Write your email:</label>
            <textarea class="form-control" id="emailMessage" rows="5" placeholder="Type your message here..."></textarea>
        </div>

        <!-- Sentiment Button -->
        <button id="analyzeSentimentBtn" class="btn btn-primary mb-3">Analyze Sentiment</button>

        <!-- Sentiment Result -->
        <div id="sentimentResult" class="alert alert-info" role="alert" style="display: none;"></div>

        <!-- Emotion Selection and Rephrase Section -->
        <div class="mb-3">
            <label for="emotionSelect" class="form-label">Choose emotion to rephrase:</label>
            <select class="form-select" id="emotionSelect">
                <option value="happy">Happy</option>
                <option value="sad">Sad</option>
                <option value="angry">Angry</option>
                <option value="neutral">Neutral</option>
            </select>
        </div>

        <!-- Rephrase Button -->
        <button id="rephraseMessageBtn" class="btn btn-secondary mb-3">Rephrase Message</button>

        <!-- Rephrased Message Result -->
        <div id="rephrasedMessageResult" class="alert alert-success" role="alert" style="display: none;"></div>
    </div>

    <script>
        document.getElementById('analyzeSentimentBtn').addEventListener('click', async () => {
            const emailMessage = document.getElementById('emailMessage').value;
            try {
                const response = await axios.post('http://127.0.0.1:8000/sentiment/', { email: emailMessage });
                document.getElementById('sentimentResult').innerHTML = `Sentiment: ${response.data.sentiment}`;
                document.getElementById('sentimentResult').style.display = 'block';
            } catch (error) {
                console.error('Error analyzing sentiment:', error);
            }
        });

        document.getElementById('rephraseMessageBtn').addEventListener('click', async () => {
            const emailMessage = document.getElementById('emailMessage').value;
            const emotion = document.getElementById('emotionSelect').value;
            try {
                const response = await axios.post('http://127.0.0.1:8000/rephrase/', { email: emailMessage, emotion: emotion });
                document.getElementById('rephrasedMessageResult').innerHTML = `Rephrased Message: ${response.data.recipe}`;
                document.getElementById('rephrasedMessageResult').style.display = 'block';
            } catch (error) {
                console.error('Error rephrasing message:', error);
            }
        });
    </script>
</body>
</html>
